---
title: "intradayModel: Modeling and Forecasting Financial Intraday Signals"
author: |
  | Shengjie Xiu, Yifan Yu, and Daniel P. Palomar
  | The Hong Kong University of Science and Technology (HKUST)
date: "`r Sys.Date()`"
output: 
  cleanrmd::html_document_clean:
    theme: "bamboo"
    mathjax: default
    toc: true
    toc_depth: 2
csl: apalike.csl
bibliography: reference.bib
link-citations: yes
vignette: >
  %\VignetteIndexEntry{Intraday Volume and Volatility: Modeling and Forecasting}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
  %\VignetteKeyword{State-space Model}
---

```{r, echo=FALSE, warning=FALSE}
library(knitr)
opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.align = "center",
  fig.retina = 2,
  out.width = "85%",
  dpi = 96 ,
  pngquant = "--speed=1"
)
knit_hooks$set(pngquant = hook_pngquant)  # brew install pngquant
options(width=100)
```

```{css, echo = FALSE}
/* ensure cleanrmd is centered */
body {
  margin: 0 auto;
  max-width: 1000px;
  padding: 2rem;
}

/* math is smaller */
.math {
  font-size: small;
}

/* set reference spacing in cleanrmd */
.references>div:first-child{ 
	margin-bottom: 1.6em;
}
```

------------------------------------------------------------------------

> Welcome to the `intradayModel` package! This vignette provides an overview of the package's features and how to use them. `intradayModel` uses state-space models to model and forecast financial intraday signal, with a focus on intraday trading volume. Our team is currently working on expanding the package to include more support for intraday volatility.

# Quick start

To get started, we load our package and some sample data: the 15-minute intraday trading volume of AAPL from 2019-01-02 to 2019-06-28, covering 124 trading days. We use the first 104 trading days for fitting, and the last 20 days for evaluation of forecasting performance.

```{r, message = FALSE}
library(intradayModel)
data(aapl_volume)
aapl_volume[1:5, 1:5] # print the head of data

aapl_volume_training <- aapl_volume[, 1:104]
aapl_volume_testing <- aapl_volume[, 105:124]
```

Next, we fit a univariate state-space model using `fit_volume` function. 

```{r}
model_fit <- fit_volume(aapl_volume_training)
```


Once the model is fitted, we can analyze the hidden components of any intraday signal based on all its observations. By calling `use_model` function with `purpose = analysis`, we obtain the smoothed daily, seasonal, and intraday dynamic components. This procedure helps us better identify the underlying information of the intraday signal.

```{r, out.width="100%"}
analysis_result <- use_model(purpose = "analysis", model_fit, aapl_volume_training)

# visualization
plots <- autoplot(analysis_result)
plots$log_components # plot smoothed hidden components (in log scale)
```
To see how well our model performs on new data, we call `use_model` function with `purpose = forecast` to do one-bin-ahead forecast on the testing set.

```{r, out.width="100%"}
forecast_result <- use_model(purpose = "forecast", model_fit, aapl_volume_testing)

# visualization
plots <- autoplot(forecast_result)
plots$original_and_resultant # plot forecast result
```




&nbsp; 

# Next steps

This guide gives an overview of the package's main features. Check the manual for details on each function, including parameters and examples.

The current version only supports univariate state-space models for intraday trading volume. Soon, we'll add models for intraday volatility and their multivariate versions. We hope you find these resources helpful and that our package will continue to be a valuable tool for your work.

&nbsp; 

# References

<div id="refs"></div>